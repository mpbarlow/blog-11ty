<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

    <!-- Feels like these should be CSS properties but okay -->
    <meta name="theme-color" content="rgb(243, 244, 246)" media="(prefers-color-scheme: light)" />
    <meta name="theme-color" content="rgb(55, 65, 81)" media="(prefers-color-scheme: dark)" />

    <meta property="og:locale" content="en_GB" />
    <meta property="og:site_name" content="barlow.dev" />
    <meta property="og:url" content="https://barlow.dev/posts/phpunits-data-providers-are-your-friend/" />
    <meta property="og:title" content="PHPUnit’s Data Providers are your friend - barlow.dev" />
    <meta property="og:type" content="blog" />
    
    <meta property="og:description" content="An introduction to PHPUnit Data Providers and the benefits they…provide" />
    <meta name="description" content="An introduction to PHPUnit Data Providers and the benefits they…provide" />
    

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/prism-one-light.css" />
    <link rel="stylesheet" href="/css/prism-material-oceanic.css" />
    <link rel="icon" type="image/png" href="/img/favicon.png" />
    <link rel="canonical" href="https://barlow.dev/posts/phpunits-data-providers-are-your-friend/" />
    <link rel="alternate" type="application/atom+xml" href="https://barlow.dev/feed.xml" title="RSS Feed" />

    <title>PHPUnit’s Data Providers are your friend - barlow.dev</title>
  </head>

  <body class="flex min-h-dvh flex-col items-stretch dark:bg-gray-800">
    <div>
      <nav
        class="mx-auto mt-4 flex max-w-prose items-center justify-between px-safe-offset-4 dark:prose-invert md:px-0"
      >
        <a href="/" title="Home">
          <span class="font-mono text-indigo-500 dark:text-indigo-400">[barlow.dev ~] $</span>
        </a>
        <div class="space-x-2">
          <a href="/posts/" class="text-indigo-500 dark:text-indigo-400">Posts</a>
          <a href="/tags/" class="text-indigo-500 dark:text-indigo-400">Tags</a>
          <a href="/feed.xml" class="text-indigo-500 dark:text-indigo-400">RSS</a>
        </div>
      </nav>
    </div>

    <main class="mb-12 mt-8 flex-grow"><article>
  <section class="relative">
    <div class="prose mx-auto max-w-prose px-safe-offset-4 dark:prose-invert md:px-0">
      <h1>PHPUnit’s Data Providers are your friend</h1>
      
      <h4>An introduction to PHPUnit Data Providers and the benefits they…provide</h4>
      

      <aside class="not-prose text-sm text-gray-600 dark:text-gray-300">
        <p>4 minute read &bull; 30th Jan 2024</p>

        <div class="relative flex flex-wrap text-xs">
          
          <a
            href="/tags/php/"
            title="See all posts tagged 'php'"
            class="mr-1 mt-2 rounded-lg border border-gray-500 px-2 py-1 text-gray-500 hover:border-indigo-500 hover:text-indigo-500 dark:border-gray-400 dark:text-gray-400"
            >php</a
          >
          
          <a
            href="/tags/phpunit/"
            title="See all posts tagged 'phpunit'"
            class="mr-1 mt-2 rounded-lg border border-gray-500 px-2 py-1 text-gray-500 hover:border-indigo-500 hover:text-indigo-500 dark:border-gray-400 dark:text-gray-400"
            >phpunit</a
          >
          
          <a
            href="/tags/programming/"
            title="See all posts tagged 'programming'"
            class="mr-1 mt-2 rounded-lg border border-gray-500 px-2 py-1 text-gray-500 hover:border-indigo-500 hover:text-indigo-500 dark:border-gray-400 dark:text-gray-400"
            >programming</a
          >
          
          <a
            href="/tags/testing/"
            title="See all posts tagged 'testing'"
            class="mr-1 mt-2 rounded-lg border border-gray-500 px-2 py-1 text-gray-500 hover:border-indigo-500 hover:text-indigo-500 dark:border-gray-400 dark:text-gray-400"
            >testing</a
          >
          
        </div>
      </aside>
    </div>

    
<div
  class="bottom-[-15px] absolute inset-x-0 -z-10 h-[1000px] origin-bottom -skew-y-2 bg-gray-100 dark:bg-gray-700"
></div>

  </section>

  <section class="prose prose-indigo mx-auto mt-12 max-w-prose px-safe-offset-4 dark:prose-invert md:px-0">
    <p>For a while after I got serious about good test coverage, my tests would often end up quite sprawling, usually with only one assertion of any real value per test case.</p>
<p>Since I started to lean more into PHPUnit’s <a href="https://phpunit.de/manual/3.7/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers">Data Providers</a>, my tests have become much simpler, and as a result easier to read, review, and maintain. Writing tests is usually not the hardest part of development of course, but I believe that reducing friction as much as possible naturally leads to better tests with more coverage.</p>
<p>As a toy example, let’s say I’ve configured a route in a Laravel app to allow listing a new product in an e-commerce system. That route has validation that looks like this:</p>
<pre class="language-php"><code class="language-php"><span class="token keyword">class</span> <span class="token class-name-definition class-name">CreateProductFormRequest</span> <span class="token keyword">extends</span> <span class="token class-name">FormRequest</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">rules</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">'name'</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'price'</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'numeric'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'min:0'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'description'</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'sometimes'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'required'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'min:50'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>It’s probably quite clear from the rule names, but just to clarify for anyone unfamiliar with validation in Laravel:</p>
<ul>
<li>A product name must be included in the request</li>
<li>A price is required, must be a number or numeric string, and may not be less than zero</li>
<li>A description is optional, but if included must be at least 50 characters long</li>
</ul>
<h2>Without a Data Provider</h2>
<p>In the past, I might have tested that this endpoint accepts what it should, and doesn’t accept what it shouldn’t, with a sprawling set of test cases like this:</p>
<pre class="language-php"><code class="language-php"><span class="token keyword">class</span> <span class="token class-name-definition class-name">ProductControllerTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token comment">/** @test */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">it_requires_a_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span>
            <span class="token operator">-></span><span class="token function">post</span><span class="token punctuation">(</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'products.store'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
                <span class="token string single-quoted-string">'name'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">''</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">'price'</span> <span class="token operator">=></span> <span class="token number">1.23</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token operator">-></span><span class="token function">assertInvalid</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/** @test */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">it_requires_a_price</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> <span class="token comment">/* … */</span> <span class="token punctuation">}</span>

    <span class="token comment">/** @test */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">it_does_not_allow_a_negative_price</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> <span class="token comment">/* … */</span> <span class="token punctuation">}</span>

    <span class="token comment">/** @test */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">it_allows_description_to_be_omitted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> <span class="token comment">/* … */</span> <span class="token punctuation">}</span>

    <span class="token comment">/** @test */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">it_requires_a_50_char_description_if_present</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> <span class="token comment">/* … */</span> <span class="token punctuation">}</span>

    <span class="token comment">/** @test */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">it_passes_validation_when_conditions_are_met</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span>
            <span class="token operator">-></span><span class="token function">post</span><span class="token punctuation">(</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'products.store'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
                <span class="token string single-quoted-string">'name'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'product name'</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">'description'</span> <span class="token operator">=></span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>Str</span><span class="token operator">::</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">'price'</span> <span class="token operator">=></span> <span class="token number">1.23</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token operator">-></span><span class="token function">assertSuccessful</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Here we have a series of test cases that make a request to our endpoint with a particular request body, and assert either a success response, or validation failures for specific keys. Having tests is almost always better than not, but there are numerous issues here, many immediately apparent.</p>
<p>For a start, despite the validation requirements being about as basic as anything you might see in a real app, the number of test cases and lines of code is already getting a bit unweildy.</p>
<p>Secondly, while the cases I’ve included example code for test <em>a</em> success or failure, there are numerous edge cases that aren’t covered. For example, what if we have an SPA that calls this route and submits JSON where <code>name</code> is <code>null</code> rather than an empty string, or a bugged form that omits the <code>name</code> field entirely? We could (and should!) include these, but the “one assertion per case” model tends to lead to a lot of copy-pasting, creating a wall of tests which will leave reviewers bleary-eyed.</p>
<h2>With a Data Provider</h2>
<p>Data Providers solve both of these problems nicely. A Data Provider is just a method that returns either an array of arrays, or yields a sequence of arrays. The outer array is effectively a list of test cases, while the inner arrays are the arguments passed to each case:</p>
<pre class="language-php"><code class="language-php"><span class="token keyword">class</span> <span class="token class-name-definition class-name">ProductControllerTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * @test
     * @dataProvider createProductProvider
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">it_validates_as_expected</span><span class="token punctuation">(</span>
        <span class="token keyword type-hint">array</span> <span class="token variable">$input</span><span class="token punctuation">,</span>
        <span class="token keyword type-hint">array</span> <span class="token variable">$expectedErrors</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">post</span><span class="token punctuation">(</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'products.store'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$input</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$expectedErrors</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$response</span><span class="token operator">-></span><span class="token function">assertInvalid</span><span class="token punctuation">(</span><span class="token variable">$expectedErrors</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token variable">$response</span><span class="token operator">-></span><span class="token function">assertSuccessful</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">createProductProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Request input, expected validation errors</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">'empty string name'</span> <span class="token operator">=></span> <span class="token punctuation">[</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">''</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'price'</span> <span class="token operator">=></span> <span class="token number">1.23</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'null name'</span> <span class="token operator">=></span> <span class="token punctuation">[</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=></span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'price'</span> <span class="token operator">=></span> <span class="token number">1.23</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'missing name'</span> <span class="token operator">=></span> <span class="token punctuation">[</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'price'</span> <span class="token operator">=></span> <span class="token number">1.23</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'non-numeric price'</span> <span class="token operator">=></span> <span class="token punctuation">[</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'price'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'foo'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'name'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'foo'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'price'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'missing price'</span> <span class="token operator">=></span> <span class="token punctuation">[</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'foo'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'price'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'price &lt; 0'</span> <span class="token operator">=></span> <span class="token punctuation">[</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'price'</span> <span class="token operator">=></span> <span class="token operator">-</span><span class="token number">1.23</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'name'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'foo'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'price'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'price exactly 0'</span> <span class="token operator">=></span> <span class="token punctuation">[</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'price'</span> <span class="token operator">=></span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'name'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'foo'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'no description'</span> <span class="token operator">=></span> <span class="token punctuation">[</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'foo'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'price'</span> <span class="token operator">=></span> <span class="token number">1.23</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'description &lt; 50 chars'</span> <span class="token operator">=></span> <span class="token punctuation">[</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'foo'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'price'</span> <span class="token operator">=></span> <span class="token number">1.23</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'description'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token string single-quoted-string">'description'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
            <span class="token comment">/* etc. etc. */</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>All we need to do is implement a public method that returns our data sets in the proper structure, accept the data as arguments to our test case, and wire it all up using the <code>@dataProvider</code> docblock tag.</p>
<p>Now, we only need to write the common logic—making the request and relevant assertions—once, and can cram in as many different permutations of data as we feel are beneficial for the code under test. Adding a new data set is as simple as adding a new entry to the array, which in my experience leads to much wider behaviour coverage, because it makes it so much less onerous to cover all your bases.</p>
<p>While this example looks just as long as the previous one, what’s being tested is so much less to mentally parse than multiple tests would be (plus I’ve split my arrays over multiple lines because I’m limited on width here 😁). You could also condense several of my example data sets into a single one, but I wanted to highlight how easy it becomes to make sure everything is covered.</p>
<h2>Structuring your refactored cases</h2>
<p>It’s not required to label the data sets (e.g. <code>'price &lt; 0'</code>), but it’s strongly recommended that you do, for two reasons. First, it makes it clear what you’re intending to test, which will assist reviewers and, undoubtedly, future-you. Secondly, if a test does fail, PHPUnit will print out the data set name in the error message, rather than a vague <code>data set #3</code>. I also like to include a brief comment noting the structure of the values as a bit of additional context, but this is just a personal preference of mine.</p>
<p>Some might say that conditionally asserting success or failure is a bad idea, as you risk introducing logic errors into the <em>test</em> that could hide real problems with your application. Personally I find the “if expect-error then specific-failure, else success” pattern to be simple and low risk, but I can totally see the argument. You might instead opt to split your expected successes and failures into two separate test cases with two Data Providers.</p>
<h2>A note on model factories</h2>
<p>My examples above are based around Laravel, but if you try to use framework features like model factories in Data Providers, you're likely to run into somewhat cryptic errors about facade roots, because the Provider runs before the framework boots. Greg Mayes has an <a href="https://www.gregmayes.dev/posts/2024/02/03/using-laravel-model-factories-in-phpunit-data-providers/">excellent post on how to solve this</a> by wrapping the data in closures to delay execution.</p>
<p>And that’s really all there is to it! Data Providers aren’t a complex feature to use, but they can be a huge help in making tests with many permutations a lot more pleasant to write.</p>

  </section>
</article>
</main>

    <footer class="relative pb-8 text-center text-xs text-gray-700 dark:text-gray-400">
      <nav class="mx-auto flex max-w-prose items-center justify-around">
        <a
  rel="me"
  href="https://cyberplace.social/@barlow"
  target="_blank"
  title="Toot me on Mastodon"
  class="hover:text-indigo-500 group flex flex-col"
>
  <img
    src="/img/mastodon.png"
    srcset="/img/mastodon_2x.png 2x, /img/mastodon_3x.png 3x"
    alt="A pixel art elephant bearing the Mastodon logo"
    class="h-[64px] w-[64px] group-hover:hidden"
  />
  <img
    src="/img/mastodon_selected.png"
    srcset="/img/mastodon_selected_2x.png 2x, /img/mastodon_selected_3x.png 3x"
    alt="A pixel art elephant bearing the Mastodon logo"
    class="hidden h-[64px] w-[64px] group-hover:inline"
  />
  <span class="mt-1">Mastodon</span>
</a>
 <a
  href="https://www.instagram.com/mattpbarlow"
  target="_blank"
  title="Dog pix"
  class="hover:text-indigo-500 group flex flex-col"
>
  <img
    src="/img/instagram.png"
    srcset="/img/instagram_2x.png 2x, /img/instagram_3x.png 3x"
    alt="A pixel art iPhone taking a photo of the Instagram logo"
    class="h-[64px] w-[64px] group-hover:hidden"
  />
  <img
    src="/img/instagram_selected.png"
    srcset="/img/instagram_selected_2x.png 2x, /img/instagram_selected_3x.png 3x"
    alt="A pixel art iPhone taking a photo of the Instagram logo"
    class="hidden h-[64px] w-[64px] group-hover:inline"
  />
  <span class="mt-1">Instagram</span>
</a>
 <a
  href="https://github.com/mpbarlow"
  target="_blank"
  title="Fork me on GitHub"
  class="hover:text-indigo-500 group flex flex-col"
>
  <img
    src="/img/github.png"
    srcset="/img/github_2x.png 2x, /img/github_3x.png 3x"
    alt="A pixel art MacBook displaying the Git logo"
    class="h-[64px] w-[64px] group-hover:hidden"
  />
  <img
    src="/img/github_selected.png"
    srcset="/img/github_selected_2x.png 2x, /img/github_selected_3x.png 3x"
    alt="A pixel art MacBook displaying the Git logo"
    class="hidden h-[64px] w-[64px] group-hover:inline"
  />
  <span class="mt-1">GitHub</span>
</a>

      </nav>
      <p class="mt-8">&copy; MMXXIV Matt Barlow</p>
      <!-- CSS is misery and you cannot convince me otherwise -->
      <div class="absolute inset-x-0 bottom-0 -z-10 h-[1000px] overflow-hidden">
        <div class="absolute bottom-[-870px] h-[1000px] w-full -skew-y-2 bg-gray-100 dark:bg-gray-700"></div>
      </div>
    </footer>
  </body>
</html>
